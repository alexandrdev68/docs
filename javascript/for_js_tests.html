<!DOCTYPE html>
<html>
    <head>
    </head>

    <body>
    
        <script>
           
            console.log(Math.random().toString().split('.')[1]);

            
function build_page(curr_page, pages, len){
                var index;
                var val;
                var result = [];
    //длинна цепочки не может быть меньше 6
    if(len < 6) return false;
    if(pages <= len){
        index = 1;
        if(curr_page > 1){
        result[index] = 'pred';
        index++;
        }
        for(var c = 1; c <= pages; c++){
            if(c == curr_page){
                result[index] = 'curr';
                index++;
            }else{
                result[index] = c;
                index++;
            }
        }
        if(curr_page < pages){
            result[index] = 'next';
            index++;
        }
        index++; result[index] = "all";
    }else if(pages > len){
        index = 1;
        val = 1;
        if(curr_page > 1){
            result[index] = 'pred';
            index++;
        }
        if(curr_page == val){
            result[index] = "curr";
            index++; val++;
        }
        result[index] = val;
        index++; val++;
        if(curr_page <= Math.ceil((len-1)/2)){
            //текущая страница в первой половине видимости
            for(var c = 1; c<=(len-2); c++){
                if(curr_page == val){
                    result[index] = "curr";
                    index++; val++;
                }
                result[index] = val;
                index++; val++;
            }
            result[index] = "last";
            index++;
            result[index] = pages; index++;
            if(curr_page < pages)    result[index] = "next";
            index++; result[index] = "all";
            result['current'] = curr_page; return result;
            
        }else{
            //текущая страница за пределами видимости
            result[index] = "first";
            index++;
            val = pages-len+1;
            if((curr_page+Math.ceil(($len-1)/2)) > pages){
                for(var c = val; c< pages; c++){
                    if(curr_page == val){
                        result[index] = "curr";
                        index++; val++;
                    }
                    result[index] = val;
                    index++; val++;
                    if(curr_page < pages)    result[index] = "next"; else result[index] = "curr";
                }
            }else{
            val = curr_page - (len-4)/2;
            for(var c = 1; c<=(len-4); c++){
                    if(curr_page == val){
                        result[index] = "curr";
                        index++; val++;
                    }
                    result[index] = val;
                    index++; val++;
                }
            result[index] = "last";
            index++;
            result[index] = pages; index++;
            if(curr_page < pages)    result[index] = "next";
            }
        }
        }
    index++;
    result[index] = 'all';
    result['current'] = curr_page;
    return result;
};
            
            console.log(build_page(1, 20, 7));
            
    
        </script>
        
    </body>
</html